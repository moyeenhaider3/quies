---
phase: 09-ux-polish-author
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - lib/features/quotes/domain/entities/quote.dart
  - lib/features/quotes/data/models/remote_quote_model.dart
  - lib/features/quotes/data/models/quote_model.dart
autonomous: true

must_haves:
  truths:
    - "Quote entity has authorSlug field (nullable String?)"
    - "RemoteQuote.toQuote() passes authorSlug to Quote constructor"
    - "Local QuoteModel still compiles (authorSlug defaults to null)"
  artifacts:
    - path: "lib/features/quotes/domain/entities/quote.dart"
      provides: "Quote entity with authorSlug field"
    - path: "lib/features/quotes/data/models/remote_quote_model.dart"
      provides: "toQuote() mapping includes authorSlug"
  key_links:
    - from: "lib/features/quotes/data/models/remote_quote_model.dart"
      to: "lib/features/quotes/domain/entities/quote.dart"
      via: "toQuote() passes authorSlug"
      pattern: "authorSlug:"
---

<objective>
Add authorSlug to Quote domain entity and wire it through RemoteQuote.toQuote() mapping.

Purpose: The author detail modal (Plan 04) needs authorSlug to fetch author data via repository.getAuthorBySlug(). Currently RemoteQuote has authorSlug but drops it during domain mapping. This is the foundational data fix that unblocks author features.
Output: Quote entity with authorSlug, RemoteQuote.toQuote() passing it through.
</objective>

<execution_context>
@.planning/phases/09-ux-polish-author/09-CONTEXT.md
@.planning/phases/09-ux-polish-author/09-RESEARCH.md
</execution_context>

<context>
@.planning/PROJECT.md

Key files to read:
@lib/features/quotes/domain/entities/quote.dart (current entity — no authorSlug)
@lib/features/quotes/data/models/remote_quote_model.dart (L46 has authorSlug, L94-118 toQuote() drops it)
@lib/features/quotes/data/models/quote_model.dart (extends Quote — may need update)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add authorSlug to Quote entity and update toQuote() mapping</name>
  <files>
    lib/features/quotes/domain/entities/quote.dart
    lib/features/quotes/data/models/remote_quote_model.dart
    lib/features/quotes/data/models/quote_model.dart
  </files>
  <action>
**1. Update Quote entity** (`lib/features/quotes/domain/entities/quote.dart`):
- Add field: `final String? authorSlug;` — nullable because local JSON quotes don't have it
- Add to constructor: `this.authorSlug,` (optional, no required)
- Add to `props` list: include `authorSlug` in the Equatable props array

**2. Update RemoteQuote.toQuote()** (`lib/features/quotes/data/models/remote_quote_model.dart`):
- In the `toQuote()` method (around L110), add `authorSlug: authorSlug,` to the Quote constructor call
- The RemoteQuote already has `this.authorSlug` as a required field (L46), so this is just passing it through

**3. Update QuoteModel** (`lib/features/quotes/data/models/quote_model.dart`):
- QuoteModel extends Quote. Read the file to check if its constructor passes all Quote fields.
- If it has its own constructor calling `super()`, add `super.authorSlug` or pass authorSlug through.
- QuoteModel is used for local JSON quotes — authorSlug will be null for these, which is fine (it's nullable).
- If QuoteModel.fromJson exists, do NOT add authorSlug parsing from local JSON (the local JSON doesn't have it).

**Important:** Do NOT modify any other files in this task. The focus is purely on the entity and its mappings. Other consumers of Quote (QuoteCard, FeedBloc, etc.) don't use authorSlug yet — that wiring happens in Plan 04.
  </action>
  <verify>
Run `dart analyze lib/features/quotes/` — no errors.
Run `grep -n "authorSlug" lib/features/quotes/domain/entities/quote.dart` — should show field declaration and props.
Run `grep -n "authorSlug" lib/features/quotes/data/models/remote_quote_model.dart` — should show it in toQuote() call.
  </verify>
  <done>Quote entity has authorSlug (nullable). RemoteQuote.toQuote() passes authorSlug through. QuoteModel compiles. All existing code unaffected (authorSlug is optional).</done>
</task>

</tasks>

<verification>
1. `dart analyze lib/` passes with no errors
2. Quote entity includes `authorSlug` in class fields and Equatable props
3. RemoteQuote.toQuote() includes `authorSlug: authorSlug` in Quote constructor
4. QuoteModel still compiles (authorSlug defaults to null for local quotes)
5. No other files broken by the change (authorSlug is nullable/optional)
</verification>

<success_criteria>
- authorSlug available on Quote entity for downstream use
- Zero breaking changes — all existing code compiles
- dart analyze clean
</success_criteria>

<output>
After completion, create `.planning/phases/09-ux-polish-author/09-03-SUMMARY.md`
</output>
